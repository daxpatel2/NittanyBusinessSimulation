<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Profile - Nittany Business</title>
  <style>
    /* General style for the page */
    body {
      font-family: 'Arial', sans-serif;
      background-color: #DFE7F2;
      margin: 0;
      padding: 0;
      min-height: 100vh;
    }
    /* Style for the top navigation bar */
    .top-bar {
      background-color: #BEC3CC;
      padding: 1rem 2rem;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky;
      top: 0;
      z-index: 100;
    }
    /* Style for the user greeting on the left */
    .top-bar .user-greeting {
      color: #505B6A;
      font-size: 1rem;
      font-weight: 500;
    }
    /* Style for the icons container on the right */
    .top-bar .icons {
      display: flex;
      gap: 1.5rem;
    }
    /* Style for icon links */
    .top-bar .icons a {
      color: #505B6A;
      font-size: 1.5rem;
      text-decoration: none;
      transition: color 0.3s ease;
    }
    /* Hover effect for icon links */
    .top-bar .icons a:hover {
      color: #B9D452;
    }
    /* Style for the main content area */
    .profile-container {
      max-width: 400px;
      margin: 2rem auto;
      padding: 2rem;
    }
    /* Style for the page header */
    h2 {
      color: #505B6A;
      font-size: 2rem;
      font-weight: 600;
      text-align: center;
      margin-bottom: 1.5rem;
    }
    /* Style for the form */
    form {
      display: flex;
      flex-direction: column;
    }
    /* Style for labels */
    label {
      color: #505B6A;
      font-size: 1rem;
      margin-bottom: 0.5rem;
    }
    /* Style for the small note under New Password */
    small {
      color: #505B6A;
      font-size: 0.85rem;
      opacity: 0.8;
    }
    /* Style for input fields */
    input[type="password"] {
      padding: 0.75rem;
      margin-bottom: 1rem;
      border: 1px solid #BEC3CC;
      border-radius: 3px;
      font-size: 1rem;
      color: #505B6A;
    }
    /* Style for the submit button (styled as a link to match other pages) */
    button {
      background: none;
      border: none;
      padding: 0.75rem;
      color: #505B6A;
      font-size: 1rem;
      text-align: center;
      cursor: pointer;
      transition: color 0.3s ease;
    }
    button:hover {
      color: #B9D452;
    }
    /* Style for links (including Back to dashboard) */
    a {
      color: #505B6A;
      text-decoration: none;
      transition: color 0.3s ease;
    }
    a:hover {
      color: #B9D452;
    }
    /* Style for the back link container */
    .back-link {
      margin-top: 1rem;
    }
    /* Style for the logout link container */
    .logout-link {
      margin-top: 1rem;
      text-align: center;
    }
    /* Style for flash messages */
    .flashes {
      list-style: none;
      padding: 0;
      margin: 1rem 0 0;
      text-align: center;
    }
    .flashes li {
      color: #505B6A;
      font-size: 0.9rem;
      padding: 0.5rem;
    }
    .flashes .success {
      color: #B9D452;
    }
    .flashes .error {
      color: #ff4d4d;
    }
    .flashes .info {
      color: #505B6A;
    }
  </style>
</head>
<body>
  <!-- Top navigation bar (consistent with other pages) -->
  <nav class="top-bar">
    <div class="user-greeting">
      Hello, {{ email }}
    </div>
    <div class="icons">
      <a href="{{ url_for('orders') }}" title="Shopping Cart">üõí</a>
      <a href="{{ url_for('orders') }}" title="View Orders to Review">üìÑ</a>
      <a href="{{ url_for('profile') }}" title="Profile Settings">‚öôÔ∏è</a>
    </div>
  </nav>

  <!-- Main content area -->
  <div class="profile-container">
    <h2>My Profile</h2>
    <form method="post" action="{{ url_for('profile') }}">
      <label>Email: {{ email }}</label>

      <label>New Password <small>(leave blank to keep current)</small>:</label>
      <input type="password" name="new_password">

      <label>Confirm New Password:</label>
      <input type="password" name="confirm_password">

      <button type="submit">Save Changes</button>
    </form>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <ul class="flashes">
        {% for category, msg in messages %}
          <li class="{{ category }}">{{ msg }}</li>
        {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}

    <!-- Logout button -->
    <div class="logout-link">
      <a href="{{ url_for('logout') }}">
        Logout
      </a>
    </div>

    <!-- Back to dashboard button -->
    <div class="back-link">
      <a href="{% if role == 'buyer' %}{{ url_for('buyer') }}{% elif role == 'seller' %}{{ url_for('seller') }}{% else %}{{ url_for('helpdesk') }}{% endif %}">
        Back to dashboard
      </a>
    </div>
  </div>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9355f854af8dbcb6',t:'MTc0NTUwMTU4MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
